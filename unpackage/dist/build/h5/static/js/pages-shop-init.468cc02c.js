(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shop-init"],{"2a10":function(e,i,t){var a=t("24fb");i=a(!1),i.push([e.i,'@charset "UTF-8";\r\n/* 页面左右间距 */\r\n/* 文字尺寸 */\r\n/*文字颜色*/\r\n/* 边框颜色 */\r\n/* 图片加载中颜色 */\r\n/* 行为相关颜色 */uni-page-body[data-v-0e155df6]{background:$page-color-base}.flex-between[data-v-0e155df6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.red[data-v-0e155df6]{color:red;margin:0 2px}.pickBox[data-v-0e155df6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-flex-wrap:wrap;flex-wrap:wrap}.pickBox .pickItem[data-v-0e155df6]{margin:5px 5px;border:1px solid #d9d9d9;padding:5px 6px;min-width:40px;border-radius:5px;white-space:nowrap}.pickBox .on[data-v-0e155df6]{background:#f76260;border:1px solid #f76260;color:#fff}.tips[data-v-0e155df6]{padding:0}.tips .mask-bg[data-v-0e155df6]{left:0;right:0;top:0;bottom:0;background:#303133;opacity:.5;z-index:98;position:fixed}.tips .mask-box[data-v-0e155df6]{position:fixed;bottom:calc(50% - 75px);left:10%;right:10%;z-index:99;background:#fff;padding:20px;min-height:150px;border-radius:5px}\r\n/* 上传 */.uni-uploader[data-v-0e155df6]{-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.uni-uploader-head[data-v-0e155df6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.uni-uploader-info[data-v-0e155df6]{color:#b2b2b2}.uni-uploader-body[data-v-0e155df6]{margin-top:%?0?%}.uni-uploader__files[data-v-0e155df6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap}.uni-uploader__file[data-v-0e155df6]{margin:%?10?%;width:%?210?%;height:%?210?%}.uni-uploader__img[data-v-0e155df6]{display:block;width:%?210?%;height:%?210?%}.uni-uploader__input-box[data-v-0e155df6]{position:relative;margin:%?10?%;width:%?208?%;height:%?208?%;border:%?2?% solid #d9d9d9}.uni-uploader__input-box[data-v-0e155df6]:before,\r\n.uni-uploader__input-box[data-v-0e155df6]:after{content:" ";position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background-color:#d9d9d9}.uni-uploader__input-box[data-v-0e155df6]:before{width:%?4?%;height:%?79?%}.uni-uploader__input-box[data-v-0e155df6]:after{width:%?79?%;height:%?4?%}.uni-uploader__input-box[data-v-0e155df6]:active{border-color:#999}.uni-uploader__input-box[data-v-0e155df6]:active:before,\r\n.uni-uploader__input-box[data-v-0e155df6]:active:after{background-color:#999}.uni-uploader__input[data-v-0e155df6]{position:absolute;z-index:1;top:0;left:0;width:100%;height:100%;opacity:0}.uni-uploader__file[data-v-0e155df6]{width:60px;height:60px}.uni-uploader__input-box[data-v-0e155df6]{width:60px;height:60px}.uni-uploader__img[data-v-0e155df6]{width:60px;height:60px}uni-page-body[data-v-0e155df6]{background:#f8f8f8}.list-cell[data-v-0e155df6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:baseline;-webkit-align-items:baseline;align-items:baseline;padding:%?20?% %?30?%;line-height:%?60?%;position:relative;background:#fff;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.list-cell.log-out-btn[data-v-0e155df6]{margin-top:%?40?%}.list-cell.log-out-btn .cell-tit[data-v-0e155df6]{color:#fa436a;text-align:center;margin-right:0}.list-cell.cell-hover[data-v-0e155df6]{background:#fafafa}.list-cell.b-b[data-v-0e155df6]:after{left:%?0?%}.list-cell.m-t[data-v-0e155df6]{margin-top:%?16?%}.list-cell .cell-more[data-v-0e155df6]{width:calc(70% - 10px);-webkit-align-self:baseline;align-self:baseline;font-size:%?28?%;color:#909399;margin-left:%?10?%}.list-cell .cell-tit[data-v-0e155df6]{vertical-align:top;width:calc(30% - %?10?%);font-size:%?30?%;color:#303133;margin-right:%?10?%}.list-cell .cell-tit .tit-desc[data-v-0e155df6]{font-size:14px;color:#555;line-height:25px}.list-cell .cell-tip[data-v-0e155df6]{font-size:%?28?%;color:#909399}.list-cell .btn-block[data-v-0e155df6]{width:100%}.list-cell .input[data-v-0e155df6]{width:100%;height:35px;line-height:35px;-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?28?%;color:#303133;border:0 solid #eee;padding:2px 5px;border-radius:5px;text-align:right}.list-cell uni-switch[data-v-0e155df6]{-webkit-transform:translateX(%?16?%) scale(.84);transform:translateX(%?16?%) scale(.84)}.list-cell-row[data-v-0e155df6]{\r\n  /* display:flex; */\r\n  /* align-items:baseline; */padding:%?20?% %?30?%;line-height:%?60?%;position:relative;background:#fff;\r\n  /* justify-content: space-between; */-webkit-flex-wrap:wrap;flex-wrap:wrap}.list-cell-row.log-out-btn[data-v-0e155df6]{margin-top:%?40?%}.list-cell-row.log-out-btn .cell-tit[data-v-0e155df6]{color:#fa436a;text-align:center;margin-right:0}.list-cell-row.cell-hover[data-v-0e155df6]{background:#fafafa}.list-cell-row.b-b[data-v-0e155df6]:after{left:%?0?%}.list-cell-row.m-t[data-v-0e155df6]{margin-top:%?16?%}.list-cell-row .cell-more[data-v-0e155df6]{width:calc(100% - %?10?%);-webkit-align-self:baseline;align-self:baseline;font-size:%?28?%;color:#909399;margin-left:%?10?%}.list-cell-row .cell-tit[data-v-0e155df6]{vertical-align:top;width:calc(100% - %?10?%);font-size:%?30?%;color:#303133;margin-right:%?10?%}.list-cell-row .cell-tit .tit-desc[data-v-0e155df6]{font-size:14px;color:#555;line-height:25px}.list-cell-row .cell-tip[data-v-0e155df6]{font-size:%?28?%;color:#909399}.list-cell-row .btn-block[data-v-0e155df6]{width:100%}.list-cell-row .textarea[data-v-0e155df6]{width:100%;min-height:135px;line-height:25px;-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?28?%;color:#303133;border:1px solid #eee;padding:5px 5px;border-radius:5px;text-align:left;margin-top:10px}.list-cell-row .input[data-v-0e155df6]{width:100%;height:35px;line-height:35px;-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?28?%;color:#303133;border:0 solid #eee;padding:2px 5px;border-radius:5px;text-align:right}body.?%PAGE?%[data-v-0e155df6]{background:$page-color-base;background:#f8f8f8}',""]),e.exports=i},"408d":function(e,i,t){"use strict";t.r(i);var a=t("bfee"),o=t.n(a);for(var n in a)"default"!==n&&function(e){t.d(i,e,(function(){return a[e]}))}(n);i["default"]=o.a},9806:function(e,i,t){"use strict";var a,o=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("v-uni-view",{staticClass:"container"},[e.shopInfo.id?e._e():t("v-uni-view",{staticClass:"list-cell b-b",attrs:{"hover-class":"cell-hover","hover-stay-time":50}},[t("v-uni-text",{staticClass:"cell-tit"},[t("v-uni-text",{staticClass:"red"},[e._v("*")]),e._v("开店邀请码")],1),t("v-uni-view",{staticClass:"cell-more"},[t("v-uni-input",{staticClass:"input",attrs:{type:"text",placeholder:"开店邀请码,请联系上级获取","placeholder-class":"placeholder"},model:{value:e.shopInfo.leader_code,callback:function(i){e.$set(e.shopInfo,"leader_code",i)},expression:"shopInfo.leader_code"}})],1)],1),t("v-uni-view",{staticClass:"list-cell b-b",attrs:{"hover-class":"cell-hover","hover-stay-time":50}},[t("v-uni-text",{staticClass:"cell-tit"},[t("v-uni-text",{staticClass:"red"},[e._v("*")]),e._v("店铺名称")],1),t("v-uni-view",{staticClass:"cell-more"},[t("v-uni-input",{staticClass:"input",attrs:{type:"text",placeholder:"设置后可修改","placeholder-class":"placeholder"},model:{value:e.shopInfo.name,callback:function(i){e.$set(e.shopInfo,"name",i)},expression:"shopInfo.name"}})],1)],1),t("v-uni-view",{staticClass:"list-cell-row b-b",attrs:{"hover-class":"cell-hover","hover-stay-time":50}},[t("v-uni-view",{staticClass:"cell-tit"},[t("v-uni-text",{staticClass:"red"}),e._v("店铺简述")],1),t("v-uni-view",{staticClass:"cell-more"},[t("v-uni-textarea",{staticClass:"textarea",attrs:{placeholder:"简要介绍一下您的店铺及特色","placeholder-class":"placeholder"},model:{value:e.shopInfo.intro,callback:function(i){e.$set(e.shopInfo,"intro",i)},expression:"shopInfo.intro"}})],1)],1),t("v-uni-view",{staticClass:"list-cell b-b",attrs:{"hover-class":"cell-hover","hover-stay-time":50}},[t("v-uni-view",{staticClass:"cell-tit"},[t("v-uni-view",[t("v-uni-text",{staticClass:"red"}),e._v("店铺头像")],1),t("v-uni-view",{staticClass:"tit-desc"})],1),t("v-uni-view",{staticClass:"cell-more",staticStyle:{"padding-top":"0px"}},[t("v-uni-view",{staticClass:"uni-uploader"},[t("v-uni-view",{staticClass:"uni-uploader-body",staticStyle:{display:"flex","justify-content":"flex-end"}},[t("v-uni-view",{staticClass:"uni-uploader__files"},[t("v-uni-view",{staticClass:"uni-uploader__file"},[t("v-uni-image",{staticClass:"uni-uploader__img",attrs:{src:e.shopInfo.logo,"data-src":e.shopInfo.logo},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.previewImage.apply(void 0,arguments)}}})],1)],1),t("v-uni-view",{staticClass:"uni-uploader__input-box"},[t("v-uni-view",{staticClass:"uni-uploader__input",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.clchooseImage({key:"logo",count:1})}}})],1)],1)],1)],1)],1),t("v-uni-view",{staticClass:"list-cell b-b",attrs:{"hover-class":"cell-hover","hover-stay-time":50}},[t("v-uni-view",{staticClass:"cell-tit"},[t("v-uni-view",[t("v-uni-text",{staticClass:"red"}),e._v("店铺封面")],1),t("v-uni-view",{staticClass:"tit-desc"})],1),t("v-uni-view",{staticClass:"cell-more",staticStyle:{"padding-top":"0px"}},[t("v-uni-view",{staticClass:"uni-uploader"},[t("v-uni-view",{staticClass:"uni-uploader-body",staticStyle:{display:"flex","justify-content":"flex-end"}},[t("v-uni-view",{staticClass:"uni-uploader__files"},[t("v-uni-view",{staticClass:"uni-uploader__file"},[t("v-uni-image",{staticClass:"uni-uploader__img",attrs:{src:e.shopInfo.cover,"data-src":e.shopInfo.cover},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.previewImage.apply(void 0,arguments)}}})],1)],1),t("v-uni-view",{staticClass:"uni-uploader__input-box"},[t("v-uni-view",{staticClass:"uni-uploader__input",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.clchooseImage({key:"cover",count:1})}}})],1)],1)],1)],1)],1),t("v-uni-view",{staticClass:"list-cell b-b",attrs:{"hover-class":"cell-hover","hover-stay-time":50}},[t("v-uni-view",{staticClass:"cell-tit"},[t("v-uni-view",[t("v-uni-text",{staticClass:"red"}),e._v("个人二维码")],1),t("v-uni-view",{staticClass:"tit-desc"},[e._v("便于顾客联系您")])],1),t("v-uni-view",{staticClass:"cell-more",staticStyle:{"padding-top":"0px"}},[t("v-uni-view",{staticClass:"uni-uploader"},[t("v-uni-view",{staticClass:"uni-uploader-body",staticStyle:{display:"flex","justify-content":"flex-end"}},[t("v-uni-view",{staticClass:"uni-uploader__files"},[t("v-uni-view",{staticClass:"uni-uploader__file"},[t("v-uni-image",{staticClass:"uni-uploader__img",attrs:{src:e.shopInfo.qrcode,"data-src":e.shopInfo.qrcode},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.previewImage.apply(void 0,arguments)}}})],1)],1),t("v-uni-view",{staticClass:"uni-uploader__input-box"},[t("v-uni-view",{staticClass:"uni-uploader__input",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.clchooseImage({key:"qrcode",count:1})}}})],1)],1)],1)],1)],1),t("v-uni-view",{staticClass:"list-cell log-out-btn",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.submit.apply(void 0,arguments)}}},[t("v-uni-button",{staticClass:"btn-block",attrs:{type:"warn"}},[e._v("保存修改")])],1)],1)},n=[];t.d(i,"b",(function(){return o})),t.d(i,"c",(function(){return n})),t.d(i,"a",(function(){return a}))},"980f":function(e,i,t){t("ac1f"),t("1276"),function(){var i={qiniuRegion:"",qiniuImageURLPrefix:"",qiniuUploadToken:"",qiniuUploadTokenURL:"",qiniuUploadTokenFunction:null,qiniuShouldUseQiniuFileName:!1};function t(e){i={qiniuRegion:"",qiniuImageURLPrefix:"",qiniuUploadToken:"",qiniuUploadTokenURL:"",qiniuUploadTokenFunction:null,qiniuShouldUseQiniuFileName:!1},a(e)}function a(e){e.region?i.qiniuRegion=e.region:console.error("qiniu uploader need your bucket region"),e.uptoken?i.qiniuUploadToken=e.uptoken:e.uptokenURL?i.qiniuUploadTokenURL=e.uptokenURL:e.uptokenFunc&&(i.qiniuUploadTokenFunction=e.uptokenFunc),e.domain&&(i.qiniuImageURLPrefix=e.domain),i.qiniuShouldUseQiniuFileName=e.shouldUseQiniuFileName}function o(e,t,o,s,r,c,u,d){if(null!=e)if(s&&a(s),i.qiniuUploadToken)n(e,t,o,s,r,c,u,d);else if(i.qiniuUploadTokenURL)l((function(){n(e,t,o,s,r,c,u,d)}));else{if(!i.qiniuUploadTokenFunction)return void console.error("qiniu uploader need one of [uptoken, uptokenURL, uptokenFunc]");if(i.qiniuUploadToken=i.qiniuUploadTokenFunction(),null==i.qiniuUploadToken&&i.qiniuUploadToken.length>0)return void console.error("qiniu UploadTokenFunction result is null, please check the return value");n(e,t,o,s,r,c,u,d)}else console.error("qiniu uploader need filePath to upload")}function n(e,t,a,o,n,l,r,c){if(null==i.qiniuUploadToken&&i.qiniuUploadToken.length>0)console.error("qiniu UploadToken is null, please check the init config or networking");else{var u=s(i.qiniuRegion),d=e.split("//")[1];o&&o.key&&(d=o.key);var p={token:i.qiniuUploadToken};i.qiniuShouldUseQiniuFileName||(p["key"]=d),r&&r();var f=wx.uploadFile({url:u,filePath:e,name:"file",formData:p,success:function(e){var o=e.data;try{var n=JSON.parse(o),l=i.qiniuImageURLPrefix+"/"+n.key;n.fileUrl=l,n.imageURL=l,console.log(n),t&&t(n)}catch(s){console.log("parse JSON failed, origin String is: "+o),a&&a(s)}},fail:function(e){console.error(e),a&&a(e)},complete:function(e){c&&c(e)}});f.onProgressUpdate((function(e){n&&n(e)})),l&&l((function(){f.abort()}))}}function l(e){wx.request({url:i.qiniuUploadTokenURL,success:function(t){var a=t.data.uptoken;a&&a.length>0?(i.qiniuUploadToken=a,e&&e()):console.error("qiniuUploader cannot get your token, please check the uptokenURL or server")},fail:function(e){console.error("qiniu UploadToken is null, please check the init config or networking: "+e)}})}function s(e){var i=null;switch(e){case"ECN":i="https://up.qiniup.com";break;case"NCN":i="https://up-z1.qiniup.com";break;case"SCN":i="https://up-z2.qiniup.com";break;case"NA":i="https://up-na0.qiniup.com";break;case"ASG":i="https://up-as0.qiniup.com";break;default:console.error("please make the region is with one of [ECN, SCN, NCN, NA, ASG]")}return i}e.exports={init:t,upload:o}}()},be5d:function(e,i,t){"use strict";t.r(i);var a=t("9806"),o=t("408d");for(var n in o)"default"!==n&&function(e){t.d(i,e,(function(){return o[e]}))}(n);t("fee7");var l,s=t("f0c5"),r=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"0e155df6",null,!1,a["a"],l);i["default"]=r.exports},bfee:function(e,i,t){"use strict";t("99af"),t("a9e3"),t("d3b7"),t("ac1f"),t("25f0"),t("1276"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o=t("980f"),n={data:function(){return{shopApi:"/clmsj/Shop/addShop",shopInfo:{logo:"",cover:""}}},onShow:function(){},onLoad:function(){this.loadData()},methods:{loadData:function(){if(uni.getStorageSync("session_key")){uni.getStorageSync("userInfo");a=this,uni.request({url:a.$Url+"/clmsj/Shop/getShop",header:{auth:uni.getStorageSync("session_key")},method:"POST",success:function(e){0==e.data.code&&(console.log("res.data.data.shop.length=="+!e.data.data.shop),e.data.data.shop.id&&(a.shopInfo=e.data.data.shop,console.log("shop 有数据")))}})}else uni.navigateTo({url:"/pages/public/login"})},submit:function(){if(a.shopInfo.name){if(Number(a.shopInfo.id)>0)this.shopApi="/clmsj/Shop/editShop";else if(!a.shopInfo.leader_code)return void a.$api.msg("请填写上级的开店邀请码");uni.showLoading({title:"提交中..."}),uni.request({url:a.$Url+this.shopApi,data:a.shopInfo,header:{auth:uni.getStorageSync("session_key")},method:"POST",success:function(e){uni.hideLoading(),0==e.data.code?(Number(a.shopInfo.id)>0?a.$api.msg("信息更新成功"):a.$api.msg("店铺申请成功，您可以去选择商品进行铺货了"),setTimeout((function(){uni.navigateTo({url:"/pages/user/user"})}),1500)):(a.$api.msg("更新失败! "+e.data.msg),1==e.data.code&&uni.navigateTo({url:"/pages/user/user"}))}})}else a.$api.msg("请填写您的店铺名")},uploadImage:function(e,i){if(void 0!=e.filePath){var t=new Date,n="clmsj/"+t.getFullYear()+"/"+t.getMonth()+"-"+t.getDate()+"/";return console.log(a.shopInfo),console.log(a.shopInfo),l(0),!1}function l(t){var s=e.filePath[t].split("."),r="."+s[s.length-1],c=Math.random().toString(36).substr(3,8)+Date.now().toString(36),u=n+c+r;o.upload(e.filePath[t],(function(o){a.shopInfo[i.key]="http://"+o.imageURL,console.log("成功==="+a.shopInfo[i.key]),console.log(a.shopInfo),t<e.filePath.length-1&&(t++,l(t)),a.$forceUpdate()}),(function(e){console.log("error: "),console.log(e)}),{region:"SCN",domain:"pic.clmsj.com",key:u,uptoken:e.token,shouldUseQiniuFileName:!1})}uni.showToast({icon:"none",title:"请选择需要更新的图片"})},clchooseImage:function(e){var i=this;console.log("clchooseImage");var t={token:[],key:[],filePath:[]};uni.chooseImage({sizeType:["original","compressed"],sourceType:["album","camera"],count:e.count,success:function(o){t.filePath=t.filePath.concat(o.tempFilePaths),uni.request({url:a.$Url+"/clmsj/goods/qiniu_token",header:{auth:uni.getStorageSync("session_key")},success:function(a){t.token=a.data.data,i.uploadImage(t,e)}})},fail:function(e){console.log(e)}})},previewImage:function(e){var i=e.target.dataset.src;uni.previewImage({current:i,urls:[i]})}}};i.default=n},f4df:function(e,i,t){var a=t("2a10");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=t("4f06").default;o("0bf32929",a,!0,{sourceMap:!1,shadowMode:!1})},fee7:function(e,i,t){"use strict";var a=t("f4df"),o=t.n(a);o.a}}]);