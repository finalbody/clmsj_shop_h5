(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/product"],{"0607":function(e,t,s){"use strict";var o,i=function(){var e=this,t=e.$createElement;e._self._c},n=[];s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return n})),s.d(t,"a",(function(){return o}))},"32eb":function(e,t,s){"use strict";(function(e){s("36ef");o(s("66fd"));var t=o(s("be65"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,s("543d")["createPage"])},"399e":function(e,t,s){"use strict";s.r(t);var o=s("f909"),i=s.n(o);for(var n in o)"default"!==n&&function(e){s.d(t,e,(function(){return o[e]}))}(n);t["default"]=i.a},"6c64":function(e,t,s){},be65:function(e,t,s){"use strict";s.r(t);var o=s("0607"),i=s("399e");for(var n in i)"default"!==n&&function(e){s.d(t,e,(function(){return i[e]}))}(n);s("e6c1");var c,r=s("f0c5"),a=Object(r["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],c);t["default"]=a.exports},e6c1:function(e,t,s){"use strict";var o=s("6c64"),i=s.n(o);i.a},f909:function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(s("4795"));function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t,s,o,i,n,c){try{var r=e[n](c),a=r.value}catch(d){return void s(d)}r.done?t(a):Promise.resolve(a).then(o,i)}function c(e){return function(){var t=this,s=arguments;return new Promise((function(o,i){var c=e.apply(t,s);function r(e){n(c,o,i,r,a,"next",e)}function a(e){n(c,o,i,r,a,"throw",e)}r(void 0)}))}}var r=getApp(),a=function(){s.e("components/share").then(function(){return resolve(s("5890"))}.bind(null,s)).catch(s.oe)},d={components:{share:a},data:function(){return{goods:{},favorite:!0,shareList:[],videoList:[],hotGoodsList:[],imgList:[],shop:[],share_uid:0,isLive:0,desc:"",specClass:"none",specSelected:{size:"",color:""},specList:{size:{key:"size",name:"尺码",selected:"",list:[]},color:{key:"color",name:"颜色",selected:"",list:[]}}}},onLoad:function(t){var s=this;return c(o.default.mark((function i(){var n,c,a,d,u,l,h,p,f;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(n=t.share_openid,c=0,console.log("share_openid == "+n),!n){o.next=8;break}return o.next=6,r.request(s.$Url+"/clmsj/login/getLsbUid",{openid:n});case 6:a=o.sent,c=a.data.data;case 8:if(console.log("share_uid == "+c),d=t.shop_id||0,!(d>0)){o.next=13;break}return o.next=13,r.request(s.$Url+"/clmsj/Shopview/bindShop",{shopId:d});case 13:return s.isLive=t.room_id||0,u=t.sid||0,s.sid=u,s.share_uid=c||t.share_uid||0,l=t.goods_id||87,console.log("onload share_uid"+s.share_uid),o.next=21,r.request(s.$Url+"/clmsj/goods/goodsdetail_shop",{goods_id:l,shop_id:s.sid});case 21:return h=o.sent,p=h.data.data,s.goods=p,s.specList.size.list=s.goods.specList.size,s.specList.color.list=s.goods.specList.color,s.imgList=p.goodsphoto_image,s.videoList=p.goodsphoto_video,e.setNavigationBarTitle({title:s.goods.name}),o.next=31,r.request(s.$Url+"/clmsj/goods/myshop",{shop_id:s.sid});case 31:f=o.sent,0==f.data.code&&(s.shop=f.data.data.shop,s.hotGoodsList=f.data.data.shop_main);case 33:case"end":return o.stop()}}),i)})))()},onShareAppMessage:function(e){return console.log("/pages/product/product?goods_id="+this.goods.goods_id+"&shop_id="+this.sid),{title:this.goods.goods_remark||"快来看看这里的商品吧",path:"/pages/product/product?goods_id="+this.goods.goods_id+"&shop_id="+this.sid}},methods:{detailBtn:function(t){e.navigateTo({url:"/pages/product/product?goods_id="+t+"&sid="+this.sid})},videoPlay:function(t){this.play_media=1;var s=e.createVideoContext(t);s.requestFullScreen()},toggleSpec:function(){var e=this;"show"===this.specClass?(this.specClass="hide",setTimeout((function(){e.specClass="none"}),250)):"none"===this.specClass&&(this.specClass="show")},selectSpec:function(e,t){var s=this;this.specList[t].selected=e,this.specSelected[t]=e,this.goods.storageList.forEach((function(e){e.color==s.specSelected.color&&e.size==s.specSelected.size&&(s.specSelected.num=e.num)})),console.log(this.specSelected)},shareBtn:function(t,s){e.share({provider:"weixin",scene:"WXSceneSession",type:5,imageUrl:"https://img-cdn-qiniu.dcloud.net.cn/uniapp/images/uni@2x.png",title:"欢迎体验",miniProgram:{id:"wxbceb417181a3492f",path:"pages/index/index",type:1,webUrl:"http://uniapp.dcloud.io"},success:function(e){console.log("success:"+JSON.stringify(e))},fail:function(e){console.log("fail:"+JSON.stringify(e))}})},share:function(){this.$refs.share.toggleMask()},toFavorite:function(){this.favorite=!this.favorite},buy:function(){if(this.specList.size.list.length>0||this.specList.color.list.length>0){if(!this.specSelected.size||!this.specSelected.color)return void e.showToast({icon:"none",title:"请选择尺码及颜色再进行购买"});if(this.specSelected.num<=0)return void e.showToast({icon:"none",title:"库存不足"})}var t=this.specSelected;t.sid=this.sid,t.goods_id=this.goods.goods_id,t.live=this.isLive,t.share_uid=this.share_uid||0,console.log("buy share_uid"+this.share_uid),e.navigateTo({url:"/pages/order/createOrder?detail="+JSON.stringify(t)})},navTo:function(t,s){"switchTab"==s?e.switchTab({url:t}):e.navigateTo({url:t})},stopPrevent:function(){}}};t.default=d}).call(this,s("543d")["default"])}},[["32eb","common/runtime","common/vendor"]]]);